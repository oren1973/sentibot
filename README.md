# 📈 Sentibot – מערכת מסחר רגשית אוטונומית
Sentibot מבצעת מסחר יומי אוטומטי על בסיס ניתוח רגשי (Sentiment Analysis) של כותרות פיננסיות ומידע מרשתות חברתיות. בכל יום היא מנתחת רגשות עבור מניות במדד S&P 500 (או קבוצה נבחרת), ממליצה על BUY / SELL / HOLD, מבצעת פקודות באלפקה (Alpaca API), שומרת תיעוד מלא, ושולחת מייל עם סיכום.

---

## ⚙️ רכיבי המערכת
| קובץ | תפקיד |
|------|--------|
| `main.py` | מריץ תהליך יומי: שליפת מידע → ניתוח → החלטה → ביצוע → תיעוד → מייל |
| `news_scraper.py` | שליפת כותרות מאתרי חדשות פיננסיים (Yahoo, MarketWatch, Reuters) |
| `reddit_scraper.py` | שליפת פוסטים מ־Reddit (כגון r/stocks) |
| `investors_scraper.py` | שליפת כותרות מ־Investors.com |
| `sentiment_analyzer.py` | ניתוח רגשי באמצעות VADER |
| `recommender.py` | קבלת החלטת מסחר לפי סף סנטימנט (ברירת מחדל: ±0.2) |
| `alpaca_trader.py` | שליחת פקודות BUY/SELL ל־Alpaca API |
| `performance_analyzer.py` | ניתוח ביצועי BUY בדיעבד והשוואה למחירי שוק |
| `learning_log.csv` | לוג מצטבר של כל ההרצות עם מידע נרחב לכל החלטה |

---

## 🔁 תהליך יומי (main.py)
1. עבור כל מניה ב־`SYMBOLS`:
   - נשלפות כותרות חדשות
   - ניתוח רגשי → ממוצע רגשות
   - החלטה BUY / SELL / HOLD לפי סף רגשי
   - בדיקה מול החלטה קודמת
   - אם שונה → שליחת פקודת מסחר
   - שמירת שורת תיעוד ללוג

2. שליחת מייל עם סיכום + קבצים מצורפים:
   - `learning_log.csv` (מצטבר)
   - `learning_log_YYYY-MM-DD.csv` (לוג יומי)

---

## 📂 מבנה הקובץ `learning_log.csv`
| עמודה | הסבר |
|--------|-------|
| `run_id` | מזהה ריצה עוקב |
| `symbol` | סימול מניה |
| `datetime` | זמן הריצה |
| `sentiment_avg` | ממוצע רגשות מהכותרות |
| `decision` | החלטה נוכחית (buy/sell/hold) |
| `previous_decision` | ההחלטה האחרונה שנרשמה |
| `sentiment_std` | סטיית תקן של הרגשות – מדד לפיזור רגשי |
| `num_articles` | כמות כותרות/פוסטים שנשלפו |
| `main_source` | מקור המידע הדומיננטי (Yahoo / Reddit / Investors) |

---

## 📧 שליחת מייל יומית
- סיכום הריצה (רק אם בוצעה פעולה)
- צרוף קבצי הלוגים

---

## 🧪 קובץ `performance_analyzer.py`
- בודק עבור כל החלטת BUY:
  - מחיר קנייה במועד ההחלטה
  - מחיר סגירה 3 ימים לאחר מכן
  - מחשב שינוי באחוזים
  - קובע האם הייתה הצלחה (אם עלה מעל 0.5%)
- מפיק סיכום ומייל עם הקובץ `performance_results.csv`

---

## 🛠️ קונפיגורציה (משתני סביבה)
יש להגדיר את המשתנים הבאים:
```bash
ALPACA_API_KEY
ALPACA_SECRET_KEY
EMAIL_USER
EMAIL_PASS
EMAIL_RECEIVER
```

---

## 🟦 תוכניות עתידיות
- שילוב volume מסחר והתנהגות בזמן אמת
- שימוש במודלי ML (לוגיסטי/עצים) לשיפור החלטות
- UI גרפי להצגת ביצועים והחלטות
- מערכת למידה אוטונומית שתשפר את ספי ההחלטה על בסיס ביצועי עבר
